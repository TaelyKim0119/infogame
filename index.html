<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì •ë³´ë³´ì•ˆì•”í˜¸ìˆ˜í•™ê³¼ ì‚¬ë‹¤ë¦¬ê²Œì„</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #E3F2FD;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
    }
    
    .container {
      max-width: 800px;
      width: 100%;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
    .header {
      background: linear-gradient(135deg, #1976D2 0%, #0D47A1 100%);
      color: white;
      padding: 20px;
      text-align: center;
      position: relative;
    }
    
    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1;
    }
    
    .header h1,
    .header p {
      position: relative;
      z-index: 2;
    }
    
    .header-image {
      max-width: 100%;
      height: auto;
      margin-bottom: 10px;
    }
    
    .game-area {
      padding: 20px;
      background-color: #E3F2FD;
    }
    
    .footer {
      padding: 15px;
      background-color: #f5f5f5;
      text-align: center;
      color: #666;
    }
    
    button {
      background: linear-gradient(to right, #1976D2, #0D47A1);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      margin: 10px auto;
      display: block;
      font-weight: bold;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .keywords, .prizes {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
    }
    
    .keyword, .prize {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.2s;
      color: white;
      overflow: hidden;
      background-color: transparent;
    }
    
    .keyword {
      background-color: #1565C0;
    }
    
    .keyword:hover {
      transform: scale(1.1);
    }
    
    .keyword.selected {
      background-color: #00B0FF;
    }
    
    .prize img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    
    .prize:nth-child(1) { background-color: transparent; }
    .prize:nth-child(2) { background-color: transparent; }
    .prize:nth-child(3) { background-color: transparent; }
    .prize:nth-child(4) { background-color: transparent; }
    .prize:nth-child(5) { background-color: transparent; }
    
    .ladder {
      position: relative;
      height: 300px;
      margin: 20px 0;
    }
    
    .vertical-line {
      position: absolute;
      width: 3px;
      background-color: white;
      top: 0;
      bottom: 0;
    }
    
    .horizontal-line {
      position: absolute;
      height: 3px;
      background-color: white;
    }
    
    .path {
      position: absolute;
      background-color: #29B6F6;
      width: 4px;
      border-radius: 2px;
    }
    
    .popup {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      display: none;
    }
    
    .popup-content {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      max-width: 400px;
      width: 90%;
    }
    
    .emoji {
      font-size: 24px;
      margin-top: 5px;
    }
    
    .result-emoji {
      font-size: 50px;
      margin: 20px 0;
    }
    
    .inventory {
      background-color: #0D47A1;
      color: white;
      padding: 10px;
      border-radius: 20px;
      margin: 15px 0;
      text-align: center;
      font-size: 14px;
    }
    
    .sparkle {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: radial-gradient(circle at center, white 0%, rgba(255,255,255,0) 70%);
      box-shadow: 0 0 10px 2px rgba(255,255,255,0.8);
      opacity: 0.7;
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      opacity: 0.7;
    }
    
    @keyframes drawPath {
      to {
        height: 100%;
      }
    }
    
    @keyframes drawPathHorizontal {
      to {
        width: 100%;
      }
    }
    
    @keyframes sparkle {
      0%, 100% {
        opacity: 0;
        transform: scale(0.5);
      }
      50% {
        opacity: 1;
        transform: scale(1.2);
      }
    }
    
    @keyframes confetti-fall {
      0% {
        transform: translateY(-10px) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.7;
      }
      100% {
        transform: translateY(1000px) rotate(720deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ì •ë³´ë³´ì•ˆì•”í˜¸ìˆ˜í•™ê³¼ 100% ë‹¹ì²¨ ì‚¬ë‹¤ë¦¬ê²Œì„</h1>
      <p>ì „ê³µíƒìƒ‰ë°•ëŒíšŒ íŠ¹ë³„ ì´ë²¤íŠ¸</p>
      <p style="font-size: 14px;">ì‚¬ë‹¤ë¦¬ë¡œ ë‹¹ì²¨ëœ ìƒí’ˆê³¼ ì‹¤ì œ ìƒí’ˆì€ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>
    </div>
    
    <div class="game-area">
      <div class="keywords">
        <div class="keyword" data-index="0">
          <span class="emoji">ğŸ’»</span>
          <span>ì •ë³´</span>
        </div>
        <div class="keyword" data-index="1">
          <span class="emoji">ğŸ”’</span>
          <span>ë³´ì•ˆ</span>
        </div>
        <div class="keyword" data-index="2">
          <span class="emoji">ğŸ”</span>
          <span>ì•”í˜¸</span>
        </div>
        <div class="keyword" data-index="3">
          <span class="emoji">ğŸ“Š</span>
          <span>ìˆ˜í•™</span>
        </div>
        <div class="keyword" data-index="4">
          <span class="emoji">ğŸŒ</span>
          <span>ì‚¬ì´ë²„</span>
        </div>
      </div>
      
      <div class="ladder" id="ladder">
        <!-- ì„¸ë¡œì„  ë° ê°€ë¡œì„ ì´ JavaScriptë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
      </div>
      
      <div class="prizes">
        <div class="prize">
          <img src="images/prize1.png" alt="ì•„ì´ìŠ¤ì»¤í”¼">
        </div>
        <div class="prize">
          <img src="images/prize2.png" alt="í”Œë ˆì´ìŠ¤ì•¤ ìƒí’ˆê¶Œ">
        </div>
        <div class="prize">
          <img src="images/prize3.png" alt="ì§€ë„êµìˆ˜ì™€ì˜ ì‹ì‚¬ê¶Œ">
        </div>
        <div class="prize">
          <img src="images/prize4.png" alt="ë©˜í† ì™€ì˜ ì‹ì‚¬ê¶Œ">
        </div>
        <div class="prize">
          <img src="images/prize1.png" alt="ì•„ì´ìŠ¤ì»¤í”¼">
        </div>
      </div>
      
      <!-- ìƒí’ˆ ìˆ˜ëŸ‰ í‘œì‹œ -->
      <div class="inventory" id="inventory">
        ì•„ì´ìŠ¤ì»¤í”¼: 100ì¥ | í”Œë ˆì´ìŠ¤ì•¤ ìƒí’ˆê¶Œ: 10ì¥ | ì§€ë„êµìˆ˜ì™€ì˜ ì‹ì‚¬ê¶Œ: 3ì¥ | ë©˜í† ì™€ì˜ ì‹ì‚¬ê¶Œ: 3ì¥
      </div>
      
      <button id="reset-button">ì‚¬ë‹¤ë¦¬ ì¬ìƒì„±</button>
    </div>
    
    <div class="footer">
      <p><strong>ì •ë³´ë³´ì•ˆì•”í˜¸ìˆ˜í•™ê³¼</strong> | ì „ê³µíƒìƒ‰ë°•ëŒíšŒ</p>
    </div>
  </div>
  
  <div class="popup" id="result-popup">
    <div class="popup-content" style="max-width: 90%; max-height: 90vh; overflow-y: auto;">
      <h2 style="color: #1976D2;">ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
      <p><span id="selected-keyword" style="font-weight: bold; color: #1976D2;"></span> í‚¤ì›Œë“œì—ì„œ ì‹œì‘í•˜ì—¬</p>
      
      <div style="background-color: #E3F2FD; padding: 20px; border-radius: 10px; margin: 20px 0;">
        <div id="result-emoji" class="result-emoji" style="display: flex; justify-content: center; align-items: center; width: 100px; height: 100px; margin: 0 auto;">
          <img style="max-width: 100%; height: auto; object-fit: contain;" />
        </div>
        <div id="result-name" style="font-size: 24px; font-weight: bold; color: #0D47A1; text-align: center; margin-top: 10px;"></div>
      </div>
      
      <p style="font-size: 18px; font-weight: bold; color: #0D47A1;">ì— ë‹¹ì²¨ë˜ì…¨ìŠµë‹ˆë‹¤!</p>
      
      <div style="background-color: #FFF9C4; padding: 10px; border-radius: 5px; border: 1px solid #FFECB3; margin: 15px 0;">
        <p style="font-size: 12px; color: #F57F17; margin: 0;">ë¶€ìŠ¤ ìš´ì˜ìì—ê²Œ ì´ í™”ë©´ì„ ë³´ì—¬ì£¼ì„¸ìš”!</p>
      </div>
      
      <button id="close-popup">ë‹«ê¸°</button>
    </div>
  </div>
  
  <script>
    // ê²Œì„ ìƒíƒœ
    let isAnimating = false;
    let selectedKeyword = null;
    let ladderLines = [];
    let prizesOrder = [0, 1, 2, 3, 4]; // 0:ì•„ì´ìŠ¤ì»¤í”¼, 1:ìƒí’ˆê¶Œ, 2:êµìˆ˜ë‹˜ì‹ì‚¬, 3:ë©˜í† ì‹ì‚¬, 4:ì•„ì´ìŠ¤ì»¤í”¼
    
    // ìƒí’ˆ ì¬ê³  ì •ë³´
    const prizeInventory = [
      { name: 'ì•„ì´ìŠ¤ì»¤í”¼', image: 'images/prize1.png', total: 100, remaining: 100 },
      { name: 'í”Œë ˆì´ìŠ¤ì•¤ ìƒí’ˆê¶Œ', image: 'images/prize2.png', total: 10, remaining: 10 },
      { name: 'ì§€ë„êµìˆ˜ì™€ì˜ ì‹ì‚¬ê¶Œ', image: 'images/prize3.png', total: 3, remaining: 3 },
      { name: 'ë©˜í† ì™€ì˜ ì‹ì‚¬ê¶Œ', image: 'images/prize4.png', total: 3, remaining: 3 },
      { name: 'ì•„ì´ìŠ¤ì»¤í”¼', image: 'images/prize1.png', total: 100, remaining: 100 }
    ];
    
    // DOM ìš”ì†Œ
    const ladder = document.getElementById('ladder');
    const keywords = document.querySelectorAll('.keyword');
    const resetButton = document.getElementById('reset-button');
    const resultPopup = document.getElementById('result-popup');
    const closePopupButton = document.getElementById('close-popup');
    const selectedKeywordText = document.getElementById('selected-keyword');
    const resultEmoji = document.getElementById('result-emoji');
    const resultName = document.getElementById('result-name');
    const inventoryDisplay = document.getElementById('inventory');
    
    // í—¤ë” ì´ë¯¸ì§€ ê´€ë ¨ ìš”ì†Œ
    const headerImageContainer = document.getElementById('header-image-container');
    const headerImage = document.getElementById('header-image');
    
    // ìƒìˆ˜
    const LADDER_HEIGHT = 300;
    const NUM_KEYWORDS = 5;
    const KEYWORD_WIDTH = 60;
    const LADDER_PADDING = 10;
    const LINE_WIDTH = 3;
    const ANIMATION_DURATION = 8000; // ì‚¬ë‹¤ë¦¬ ì• ë‹ˆë©”ì´ì…˜ ì´ ì‹œê°„ (ms) - ë” ëŠë¦¬ê²Œ ì„¤ì •
    
    // ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
      generateLadder();
      
      // í—¤ë” ì´ë¯¸ì§€ ì„¤ì • (URLì´ ìˆì„ ê²½ìš°)
      setHeaderImage();
      
      // í‚¤ì›Œë“œ í´ë¦­ ì´ë²¤íŠ¸
      keywords.forEach(keyword => {
        keyword.addEventListener('click', () => {
          if (isAnimating) return;
          
          const index = parseInt(keyword.dataset.index);
          findPath(index);
        });
      });
      
      // ì‚¬ë‹¤ë¦¬ ì¬ìƒì„± ë²„íŠ¼
      resetButton.addEventListener('click', generateLadder);
      
      // íŒì—… ë‹«ê¸° ë²„íŠ¼
      closePopupButton.addEventListener('click', () => {
        resultPopup.style.display = 'none';
      });
      
      // ì´ˆê¸° ì¬ê³  ì •ë³´ í‘œì‹œ
      updateInventoryDisplay();
    });
    
    // í—¤ë” ì´ë¯¸ì§€ ì„¤ì •
    function setHeaderImage() {
      // ì´ ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì—¬ ì‹¤ì œ í—¤ë” ì´ë¯¸ì§€ URLì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
      const headerImageUrl = ''; // í—¤ë” ì´ë¯¸ì§€ URL ì…ë ¥
      
      if (headerImageUrl) {
        headerImage.src = headerImageUrl;
        headerImageContainer.style.display = 'block';
      }
    }
    
    // ì¬ê³  ì •ë³´ ì—…ë°ì´íŠ¸ í‘œì‹œ
    function updateInventoryDisplay() {
      const coffeeRemaining = prizeInventory[0].remaining + prizeInventory[4].remaining;
      const coffeeTotal = prizeInventory[0].total + prizeInventory[4].total;
      
      inventoryDisplay.innerHTML = `
        ì•„ì´ìŠ¤ì»¤í”¼: ${coffeeRemaining}/${coffeeTotal}ì¥ | 
        í”Œë ˆì´ìŠ¤ì•¤ ìƒí’ˆê¶Œ: ${prizeInventory[1].remaining}/${prizeInventory[1].total}ì¥ | 
        ì§€ë„êµìˆ˜ì™€ì˜ ì‹ì‚¬ê¶Œ: ${prizeInventory[2].remaining}/${prizeInventory[2].total}ì¥ | 
        ë©˜í† ì™€ì˜ ì‹ì‚¬ê¶Œ: ${prizeInventory[3].remaining}/${prizeInventory[3].total}ì¥
      `;
    }
    
    // ì‚¬ë‹¤ë¦¬ ìƒì„± í•¨ìˆ˜
    function generateLadder() {
      // ê¸°ì¡´ ì‚¬ë‹¤ë¦¬ ì´ˆê¸°í™”
      ladder.innerHTML = '';
      ladderLines = [];
      isAnimating = false;
      selectedKeyword = null;
      
      // ê° í‚¤ì›Œë“œì˜ ì„ íƒ ìƒíƒœ ì´ˆê¸°í™”
      keywords.forEach(keyword => {
        keyword.classList.remove('selected');
      });
      
      // ì„¸ë¡œì„  ìƒì„±
      for (let i = 0; i < NUM_KEYWORDS; i++) {
        const x = (ladder.offsetWidth / NUM_KEYWORDS) * i + (ladder.offsetWidth / NUM_KEYWORDS / 2);
        const verticalLine = document.createElement('div');
        verticalLine.className = 'vertical-line';
        verticalLine.style.left = `${x}px`;
        ladder.appendChild(verticalLine);
      }
      
      // ê°€ë¡œì„  ìƒì„± (ëœë¤)
      const spacingY = LADDER_HEIGHT / 10;
      
      for (let i = 0; i < NUM_KEYWORDS - 1; i++) {
        const numLines = Math.floor(Math.random() * 3) + 2; // 2-4ê°œì˜ ê°€ë¡œì„ 
        
        for (let j = 0; j < numLines; j++) {
          const y = spacingY + j * (LADDER_HEIGHT / numLines) + Math.random() * 20 - 10;
          const width = ladder.offsetWidth / NUM_KEYWORDS;
          const x = (ladder.offsetWidth / NUM_KEYWORDS) * i + (ladder.offsetWidth / NUM_KEYWORDS / 2);
          
          const horizontalLine = document.createElement('div');
          horizontalLine.className = 'horizontal-line';
          horizontalLine.style.left = `${x}px`;
          horizontalLine.style.top = `${y}px`;
          horizontalLine.style.width = `${width}px`;
          
          ladder.appendChild(horizontalLine);
          
          ladderLines.push({
            x1: x,
            x2: x + width,
            y: y
          });
        }
      }
      
      // ë„ì°©ì  ìˆœì„œ ì„ê¸°
      shufflePrizes();
    }
    
    // ë„ì°©ì  ìˆœì„œ ì„ê¸°
    function shufflePrizes() {
      prizesOrder = [0, 1, 2, 3, 4];
      for (let i = prizesOrder.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [prizesOrder[i], prizesOrder[j]] = [prizesOrder[j], prizesOrder[i]];
      }
    }
    
    // ê²½ë¡œ ì°¾ê¸° í•¨ìˆ˜
    function findPath(keywordIndex) {
      if (isAnimating) return;
      
      isAnimating = true;
      selectedKeyword = keywordIndex;
      
      // ì„ íƒëœ í‚¤ì›Œë“œ í•˜ì´ë¼ì´íŠ¸
      keywords.forEach((k, idx) => {
        if (idx === keywordIndex) {
          k.classList.add('selected');
        } else {
          k.classList.remove('selected');
        }
      });
      
      // ì‹œì‘ ìœ„ì¹˜
      const startX = (ladder.offsetWidth / NUM_KEYWORDS) * keywordIndex + (ladder.offsetWidth / NUM_KEYWORDS / 2);
      let currentX = startX;
      let currentY = 0;
      
      // ê²½ë¡œ ê³„ì‚°
      const pathSegments = [];
      pathSegments.push({ x: currentX, y: currentY, isVertical: true });
      
      // ì‚¬ë‹¤ë¦¬ ë‚´ë ¤ê°€ê¸°
      while (currentY < LADDER_HEIGHT) {
        // í˜„ì¬ ìœ„ì¹˜ì—ì„œ ê°€ë¡œì„  ì°¾ê¸°
        let foundHorizontalLine = false;
        
        for (const line of ladderLines) {
          // í˜„ì¬ x ìœ„ì¹˜ê°€ ê°€ë¡œì„ ì˜ ì‹œì‘ì ì´ë‚˜ ëì ê³¼ ì¼ì¹˜í•˜ê³ , í˜„ì¬ y ìœ„ì¹˜ë³´ë‹¤ ì•„ë˜ì— ìˆëŠ” ê°€ì¥ ê°€ê¹Œìš´ ì„ 
          if ((Math.abs(line.x1 - currentX) < 5 || Math.abs(line.x2 - currentX) < 5) && 
              line.y > currentY &&
              !foundHorizontalLine) {
            
            foundHorizontalLine = true;
            
            // ì„¸ë¡œ ì´ë™
            pathSegments.push({ x: currentX, y: line.y, isVertical: true });
            currentY = line.y;
            
            // í˜„ì¬ ìœ„ì¹˜ê°€ ê°€ë¡œì„ ì˜ ì–´ëŠ ìª½ ëì— ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ë°˜ëŒ€ìª½ìœ¼ë¡œ ì´ë™
            if (Math.abs(line.x1 - currentX) < 5) {
              // ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™
              pathSegments.push({ x: line.x2, y: currentY, isVertical: false, direction: 'right' });
              currentX = line.x2;
            } else {
              // ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ìœ¼ë¡œ ì´ë™
              pathSegments.push({ x: line.x1, y: currentY, isVertical: false, direction: 'left' });
              currentX = line.x1;
            }
            
            break;
          }
        }
        
        // ê°€ë¡œì„ ì„ ì°¾ì§€ ëª»í–ˆë‹¤ë©´ ì•„ë˜ë¡œ ì´ë™
        if (!foundHorizontalLine) {
          currentY += 20;
          if (currentY >= LADDER_HEIGHT) {
            pathSegments.push({ x: currentX, y: LADDER_HEIGHT, isVertical: true });
            break;
          }
        }
      }
      
      // ê²°ê³¼ ì¸ë±ìŠ¤ ê³„ì‚°
      const columnIndex = Math.floor((currentX / ladder.offsetWidth) * NUM_KEYWORDS);
      const finalPrizeIndex = prizesOrder[columnIndex];
      
      // ìƒí’ˆ ì¬ê³  í™•ì¸ ë° ì—…ë°ì´íŠ¸
      if (prizeInventory[finalPrizeIndex].remaining > 0) {
        prizeInventory[finalPrizeIndex].remaining -= 1;
        updateInventoryDisplay();
        
        // ì¬ê³ ê°€ 0ì´ ë˜ë©´ ì‚¬ë‹¤ë¦¬ ì¬ìƒì„±
        if (prizeInventory[finalPrizeIndex].remaining === 0) {
          setTimeout(() => {
            generateLadder();
          }, ANIMATION_DURATION + 1000);
        }
      }
      
      // ê²½ë¡œ ì• ë‹ˆë©”ì´ì…˜ ê·¸ë¦¬ê¸°
      animatePath(pathSegments, prizesOrder[columnIndex]);
    }
    
    // ê²½ë¡œ ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
    function animatePath(segments, finalPrize) {
      let totalSegments = segments.length - 1;
      let segmentDuration = ANIMATION_DURATION / totalSegments;
      
      for (let i = 0; i < segments.length - 1; i++) {
        const current = segments[i];
        const next = segments[i + 1];
        
        const path = document.createElement('div');
        path.className = 'path';
        
        if (next.isVertical) {
          // ì„¸ë¡œì„  ì• ë‹ˆë©”ì´ì…˜ (ë³€ê²½ ì—†ìŒ)
          path.style.left = `${current.x}px`;
          path.style.top = `${current.y}px`;
          path.style.height = '0';
          path.style.width = '4px';
          
          const finalHeight = next.y - current.y;
          
          setTimeout(() => {
            path.style.transition = `height ${segmentDuration}ms ease-in-out`;
            path.style.height = `${finalHeight}px`;
          }, i * segmentDuration);
        } else {
          // ê°€ë¡œì„  ì• ë‹ˆë©”ì´ì…˜ - ë°©í–¥ ê²°ì •
          const isMovingRight = current.x < next.x;
          const startX = isMovingRight ? current.x : next.x;
          const width = Math.abs(next.x - current.x);
          
          path.style.left = `${startX}px`;
          path.style.top = `${current.y - 2}px`;
          path.style.height = '4px';
          path.style.width = '0';
          
          setTimeout(() => {
            path.style.transition = `width ${segmentDuration}ms ease-in-out`;
            path.style.width = `${width}px`;
            // ì• ë‹ˆë©”ì´ì…˜ ë°©í–¥ ì„¤ì •
            path.style.transformOrigin = isMovingRight ? 'left' : 'right';
          }, i * segmentDuration);
        }
        
        ladder.appendChild(path);
      }
      
      // ì „ì²´ ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„ í›„ì— ê²°ê³¼ í‘œì‹œ
      setTimeout(() => {
        showResult(finalPrize);
      }, ANIMATION_DURATION + 500); // ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ í›„ ì•½ê°„ì˜ ì§€ì—° ì‹œê°„ ì¶”ê°€
    }
    
    // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
    function showResult(prizeIndex) {
      // ì„ íƒëœ í‚¤ì›Œë“œ í…ìŠ¤íŠ¸ ì„¤ì •
      selectedKeywordText.textContent = document.querySelector(`.keyword[data-index="${selectedKeyword}"]`).querySelector('span:not(.emoji)').textContent;
      
      // ê²°ê³¼ ì´ë¯¸ì§€ì™€ ì´ë¦„ ì„¤ì •
      const prize = prizeInventory[prizeIndex];
      resultEmoji.innerHTML = `<img src="${prize.image}" alt="${prize.name}" style="width: 100px; height: 100px; object-fit: contain; border-radius: 50%;">`;
      resultName.textContent = prize.name;
      
      // í­ì£½ íš¨ê³¼ ìƒì„±
      createFireworks();
      
      // ê²°ê³¼ íŒì—… í‘œì‹œ
      resultPopup.style.display = 'flex';
      
      // ì• ë‹ˆë©”ì´ì…˜ ìƒíƒœ ë¦¬ì…‹ (2ì´ˆ í›„)
      setTimeout(() => {
        isAnimating = false;
      }, 2000);
    }
    
    // í­ì£½ íš¨ê³¼ ìƒì„±
    function createFireworks() {
      const popupContent = document.querySelector('.popup-content');
      
      // ë°˜ì§ì´ëŠ” ë¹› íš¨ê³¼
      for (let i = 0; i < 15; i++) {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        sparkle.style.top = `${Math.random() * 100}%`;
        sparkle.style.left = `${Math.random() * 100}%`;
        sparkle.style.animation = `sparkle ${Math.random() * 3 + 2}s ease-in-out infinite`;
        resultPopup.appendChild(sparkle);
      }
      
      // ì»¨í˜í‹°
      const colors = [
        'rgba(25, 118, 210, 0.8)',   // íŒŒë€ìƒ‰
        'rgba(13, 71, 161, 0.8)',    // ì§„í•œ íŒŒë€ìƒ‰
        'rgba(0, 176, 255, 0.8)',    // ë°ì€ íŒŒë€ìƒ‰
        'rgba(41, 182, 246, 0.8)',   // í•˜ëŠ˜ìƒ‰
        'rgba(79, 195, 247, 0.8)'    // ì—°í•œ í•˜ëŠ˜ìƒ‰
      ];
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.top = `${Math.random() * 100}%`;
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animation = `confetti-fall ${Math.random() * 5 + 5}s ease-in-out forwards`;
        resultPopup.appendChild(confetti);
      }
    }
  </script>
</body>
</html>